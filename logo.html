<html>
<canvas id="canvas" width="320" height="640"></canvas>
<form onSubmit="submitCommand(this)">
	<input type="text" id="command"></input>
	<input type="submit"></input>
</form>
<script>
var red = '#FF0000';
var green = '#00FF00';
var blue = '#0000FF';

var turtlepos = [160, 320];
var degrees = 90;
var linesx = [0];
var linesy = [0];

var command;

var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');
context.fillStyle = red;
context.fillRect(turtlepos[0], turtlepos[1], 48, 48);

function submitCommand(form) {
	command = form.command.value;
	console.log(command);
	var words = command.split(" ");
	var validNumber = true;
	var number;
	if (words.length > 0) {
		if (words.length > 1) {
			number = Number(words[1]);
			if (isNaN(number)) {
				validNumber = false;
			}
		}
		switch (words[0]) {
			case "fd":
			case "forward":
				if (validNumber) {
					translateTurtle(true, number);
				} break;
			case "bk":
			case "back":
				if (validNumber) {
					translateTurtle(false, number);
				} break;
			case "left":
			case "lft":
				if (validNumber) {
					rotateTurtle(true, number);
				} break;
			case "right":
			case "rt":
				if (validNumber) {
					rotateTurtle(false, number);
				} break;
			default:
				alert('not a valid command');
				break;
		}
	}
	return false;
}

function translateTurtle(forward, distance) {
	var dir = forward ? 1 : -1;
	console.log("fd: " + forward + " dist: " + distance);
	if (degrees <= 90) {
		turtlepos[0] += (dir * distance * Math.cos(degrees * Math.PI/180));
		console.log("degrees: " + degrees);
		console.log("cos: " + Math.cos(degrees));
		turtlepos[1] += (dir * distance * Math.sin(degrees * Math.PI/180));
		console.log("new (x, y): " + turtlepos[0] + ", " + turtlepos[1]);
	} else if (degrees <= 180) {

	} else if (degrees <= 270) {

	} else if (degrees <= 360) {

	}
}

function rotateTurtle(left, deg) {
	if (left) {
		degrees += deg;
	} else {
		degrees -= deg;
	}
	if (degrees > 360) {
		degrees = degrees - 360;
	}
	console.log(degrees);
}

</script>
</html>